# TuneTrail Community Edition Configuration
# Copy this file to .env and update values

#============================================
# EDITION SETTINGS
#============================================
EDITION=community
ENVIRONMENT=development
DEBUG=true

#============================================
# DATABASE (PostgreSQL + pgvector)
#============================================
POSTGRES_USER=tunetrail
POSTGRES_PASSWORD=change_me_secure_password_123
POSTGRES_DB=tunetrail_community
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

#============================================
# REDIS CACHE
#============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change_me_redis_password
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

#============================================
# SECURITY
#============================================
# Generate with: openssl rand -hex 32
JWT_SECRET=your_jwt_secret_minimum_32_characters_long
API_KEY=your_api_key_for_internal_services

#============================================
# ML CONFIGURATION
#============================================
MODEL_TIER=basic              # basic, premium, enterprise
MAX_WORKERS=4
ENABLE_GPU=false
TORCH_HOME=/models
MODEL_CACHE_DIR=/models

#============================================
# AUDIO PROCESSING
#============================================
FEATURE_EXTRACTION_BATCH_SIZE=100
AUDIO_SAMPLE_RATE=22050
MAX_AUDIO_LENGTH_SECONDS=600

#============================================
# STORAGE (Local/MinIO)
#============================================
STORAGE_TYPE=minio
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=change_me_minio_password
S3_BUCKET=tunetrail-audio
S3_REGION=us-east-1

#============================================
# CELERY TASK QUEUE
#============================================
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

#============================================
# FRONTEND
#============================================
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_PUBLIC_EDITION=community

#============================================
# MONITORING (Optional)
#============================================
ENABLE_TELEMETRY=false
SENTRY_DSN=
PROMETHEUS_PORT=9090

#============================================
# COMMUNITY FEATURES
#============================================
ENABLE_USER_REGISTRATION=true
ENABLE_MODEL_SHARING=true
ENABLE_FEDERATION=false
MAX_TRACK_UPLOAD_SIZE_MB=100